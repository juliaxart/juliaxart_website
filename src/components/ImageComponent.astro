---
import type { ImageMetadata } from 'astro';

const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/*.{jpeg,jpg,png}');
---
<ul class="gallery">
   {Object.keys(images).map((img) => <li class="gallery-item"><img src={img} /></li>)}
</ul>

<style>
   ul {
      width: 80%;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      row-gap: 10px;

      &:after {
         content: '';
         display: block;
         flex-grow: 10;
      }
   }

   li {
      height: 30vh;
      list-style-type: none
   }

   img {
      max-height: 100%;
      object-fit: contain;
      vertical-align: bottom;
   }

   @media (max-height: 480px) {
      li {
         height: 80vh;
      }
   }

   @media (max-aspect-ratio: 1/1) and (max-width: 480px) {
      ul {
         flex-direction: row;
      }

      li {
         height: auto;
         width: 100%;
      }

      img {
         width: 100%;
         max-height: 75vh;
         min-width: 0;
      }
   }
</style>